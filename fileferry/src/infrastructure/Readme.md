# Infrastructure Layer

–≠—Ç–æ—Ç —Å–ª–æ–π ‚Äî –æ—Å–Ω–æ–≤–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏ –∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. –û–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–¥–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏—Ç–µ—Ä–∞—Ü–∏–π –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–≤, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã—Ä–∞–±–æ—Ç–∞–ª–æ—Å—å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã –º–µ–∂–¥—É —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º **MinIO** –∏ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö **PostgreSQL**.

Infrastructure Layer ‚Äî —ç—Ç–æ –º–æ—ë –≤–∏–¥–µ–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –Ω–∞–¥—ë–∂–Ω–æ–µ –∏ —á–µ—Å—Ç–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—ä–µ–∫—Ç–Ω—ã–º–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏, –∏–∑–±–µ–≥–∞—è –ª–æ–∂–Ω–æ–π –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –≥—Ä–∞–º–æ—Ç–Ω—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π.

## üõ†Ô∏è –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

Infrastructure Layer –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç:
- –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ ORM (SQLAlchemy) –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (MinIO, Redis).
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ —Å —É—á—ë—Ç–æ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –º–µ–∂–¥—É —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–∏–º —Ä–µ—Å—É—Ä—Å–∞–º –∏ –∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.
- –õ–æ–≥–∏–∫—É —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º.

## üí° –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è

1. **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è, –∞ –Ω–µ –ª–æ–∂–Ω–∞—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å**
   - –í–º–µ—Å—Ç–æ –ø–æ–ø—ã—Ç–æ–∫ —Å–æ–∑–¥–∞—Ç—å –ø—Å–µ–≤–¥–æ–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –º–µ–∂–¥—É MinIO –∏ SQLAlchemy, —è –≤—ã–±—Ä–∞–ª –ø—É—Ç—å **–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π**.
   - –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —á–µ—Å—Ç–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –∏–∑–±–µ–≥–∞—è —Ä–∏—Å–∫–∞ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏.

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ SQLAlchemy**
   - –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `async with`, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≥–∏–±–∫–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä —Å–µ—Å—Å–∏–π, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —è–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞—á–∞–ª–æ–º –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
   - –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ —É—Ç–µ—á–∫–∏ —Å–µ—Å—Å–∏–∏ –∏ –ø–æ–≤—ã—à–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å—é.

---

## üó∫Ô∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Config)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º:
  - **minio.py**: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–ª–∏–µ–Ω—Ç–∞ MinIO.
  - **postgres.py**: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL.
  - **redis.py**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Redis.

### 2. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π (Coordination)
- **minio_sqla.py**: –õ–æ–≥–∏–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –º–µ–∂–¥—É MinIO –∏ SQLAlchemy.
  - –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –æ–ø–µ—Ä–∞—Ü–∏–π —Å —É—á—ë—Ç–æ–º –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–±–æ–µ–≤.
  - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Ä–∞–∑–¥–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–æ–≤ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.

### 3. –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º (Data Access)
- **alchemy.py**: –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ SQLAlchemy.
- **redis.py**: –î–æ—Å—Ç—É–ø –∫ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ Redis.

### 4. –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –º–∞–ø–ø–∏–Ω–≥ –æ—à–∏–±–æ–∫ (Exceptions)
- **handlers/**: –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø–æ –º–æ–¥—É–ª—è–º (Alchemy, Redis, S3).
- **mappers/**: –ú–∞–ø–ø–∏–Ω–≥ –æ—à–∏–±–æ–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.

### 5. –•—Ä–∞–Ω–∏–ª–∏—â–µ (Storage)
- **minio.py**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è MinIO.
- **redis.py**: –ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Redis.
- –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä–µ–∫—Ç–∞–º–∏, –∏—Ö –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ.

### 6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏ (Tasks)
- **manager.py**: –ú–µ–Ω–µ–¥–∂–µ—Ä —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á.
- **scheduler.py**: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
- **consistence.py**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –±–∞–∑–µ.

### 7. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (Tx)
- **context.py**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π –Ω–∞ —É—Ä–æ–≤–Ω–µ SQLAlchemy.
- **manager.py**: –ú–µ–Ω–µ–¥–∂–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—â–∏–π —Ä–∞–±–æ—Ç—É —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.

### 8. HTTP-–∫–ª–∏–µ–Ω—Ç—ã (HTTP)
- **create_clientsession.py**: –°–æ–∑–¥–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö HTTP-—Å–µ—Å—Å–∏–π –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

### 9. –£—Ç–∏–ª–∏—Ç—ã (Utils)
- **file_helper.py**: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏.
- **stream_reader.py**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

---

## üíé –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

### 1. –ß–µ—Å—Ç–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –°–ª–æ–π —Å—Ç—Ä–æ–∏—Ç—Å—è –≤–æ–∫—Ä—É–≥ –∏–¥–µ–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏.
- –ò—Å–∫–ª—é—á–∞–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ —Å–æ–∑–¥–∞—Ç—å –ª–æ–∂–Ω—É—é –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å MinIO –∏ PostgreSQL.

### 2. –ì–∏–±–∫–æ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ `async with`.
- –î–∞—ë—Ç –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏.

### 3. –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—è
- –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –∑–∞–¥–∞—á—É –∏ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏.
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–º –º–æ–¥—É–ª—è–º, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫—É.

### 4. –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —Ö—Ä–∞–Ω–∏–ª–∏—â –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–æ–Ω–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤.
- –°–ª–æ–π –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

### 5. –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- –ü—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω—ã —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å–±–æ—è –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö.
- –õ–æ–≥–∏–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

---
